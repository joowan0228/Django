{% extends 'todo/base.html' %}
{% block content %}
<div class="container mt-5">
    {% if request.user.is_authenticated %}
    <div class="d-flex justify-content-between align-items-center mb-3">
        {% if not request.user.is_staff %}
            <h1>{{ request.user.username }}'s Todo List</h1>
        {% else %}
            <h1>All To Do List</h1>
        {% endif %}
        <a class="btn btn-success" href="{% url 'cbv_todo_create' %}">생성하기</a>
    </div>
    <div class="list-group mb-3">
        {% for todo in page_obj.object_list %}
            <div class="list-group-item d-flex align-items-center">
                <img class="img-thumbnail me-3" src="{{ todo.thumbnail.url }}" alt="썸네일" style="width: 100px; height: 100px; object-fit: contain;">
                {% if todo.is_completed %}
                    <a class="text-decoration-none text-black" href="{% url 'cbv_todo_info' todo.id %}">{{ todo.title }} (Completed)</a>
                {% else %}
                    <a class="text-decoration-none text-black" href="{% url 'cbv_todo_info' todo.id %}">{{ todo.title }}</a>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    {% include 'todo/pagination.html' %}
    {% endif %}
</div>
{% endblock %}
